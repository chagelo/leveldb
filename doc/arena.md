# Arena

leveldb 本身不会直接申请释放内存，需要内存向 Arena 申请，释放也是。

1. 第一种，如果需要的内存大于 1KB 就从堆上分配，否则就分配一个 4KB 大小的块然后从这个 4KB 大小的块中申请需要的空间
2. 第二种，其实就是保证当前申请的空间的地址始终是按 8 字节对齐的


四分之一策略，让小内存可以都从内存块中分配内存，而较大的内存申请从系统申请。避免了大量的小内存申请和释放，同时也保证了每个内存块被浪费的空间不会超过 block_size/4。

每个 MemTable 对象有个 Arena 对象，MemTable 写满 Arena 会析构，所以内存不会释放不了